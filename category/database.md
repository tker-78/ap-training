# データベース
## データベースの設計
### 概念設計
概念データモデルを作成する. `E-Rモデル`や`UMLクラス図`を使用して記述する.  

#### データ項目の洗い出し
1. データ項目名の標準化
2. データ項目の意味の定義
3. データ項目の桁数や型の統一
4. 各データ項目の発生源や発生量の明確化

### 論理設計
概念データモデルを、論理データモデルと言われるデータベース構造モデルに変換する.  
主キーや外部キーを含めたテーブル構造を作成する.  
ビューの定義を行うのもこの段階.  

### 物理設計
データ量、データの利用頻度、パフォーマンス性を考慮してデータベースの物理的構造を決める.  

## 3層スキーマ
### 外部スキーマ
利用者やアプリケーションプログラムから見たデータの定義を行う. 
### 概念スキーマ
データベースの論理的構造とその内容を定義する. 論理データモデルが該当.
### 内部スキーマ
物理的内容の定義を行う. 

### E-R図
#### 多対多の関係
多対多の関係は、1対多、多対1の関係に分解する.  

## 関係データベース
### キー
#### スーパーキー
表中の行を一位に特定できる属性、あるいは属性の組みを`スーパーキー`とよぶ.  
#### 候補キー
必要最小限の属性によって構成されるスーパーキー.  
一意性制約が設定される.  
#### 主キー
複数の候補キーの中から任意に選んだ1つのキー.  
主キーに選ばれなかった残りの候補キーを`代理キー`と呼ぶ.  
#### 外部キー
関連する他の表を参照する属性あるいは属性の組み.  
2つの表の間に「1対多」の関係がある場合、「多」側の表に「1」側の表の主キーあるいは主キー以外の候補キーを参照する属性を持たせて、これを外部キーとする. これにより、外部キーの値が被参照表に存在することを保証する`参照制約`が確保できる.  

